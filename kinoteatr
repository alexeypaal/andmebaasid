CREATE DATABASE paal;
use paal

---Tabeli loomine zanr .
CREATE TABLE zanr(
	zanrId int Primary Key identity(1,1),
	zanrNimi varchar(25),
	zanrKirjeldus TEXT)
INSERT INTO zanr (zanrNimi, zanrKirjeldus)
VALUES ('Komöödia', 'naeruväärne'), ('Perekonna', 'siiras ja lahke'), 
('Õudus', 'hirmutav'), ('Detektiiv', 'huuvitav')
SELECT * FROM zanr




---Tabeli loomine filmType.
CREATE TABLE filmType(
	filmTypeId int Primary Key identity(1,1),
	filmType varchar(25),
	kirjeldus TEXT)
INSERT INTO filmType (filmType, kirjeldus)
VALUES ('5D', 'uue põlvkonna atraktsioon'), ('4D', '3D-kino ja füüsilised efektid'), 
('3D', 'tekitades vaatajas illusiooni ruumi sügavusest '), ('2D', 'tavaline filmi taasesitus')
SELECT * FROM filmType


ALTER TABLE film ADD FOREIGN KEY (filmTypeId) REFERENCES filmType(filmTypeId);

---Tabeli loomine rezisor.
CREATE TABLE rezisor(
	resizorId int Primary Key identity(1,1),
	eesnimi varchar(25),
	perenimi varchar(25))
INSERT INTO rezisor (eesnimi, perenimi)
VALUES ('Alexey', 'Paal'), ('Nikita', 'Kersanov'), ('Stanislav', 'Tsugunov'), ('Pavel', 'Smirnov')
SELECT * FROM rezisor


ALTER TABLE film ADD FOREIGN KEY (rezisorId) REFERENCES rezisor(resizorId);

---Tabeli loomine piletiMuuk.
CREATE TABLE piletiMuuk(
	piletiMyykId int Primary Key identity(1,1),
	kogus int,
	kinokavaId int)
INSERT INTO piletiMuuk (kogus, kinokavaId)
VALUES (11, 3)
SELECT * FROM piletiMuuk

ALTER TABLE piletiMyyk ADD FOREIGN KEY (kinokavaId) REFERENCES kinokava(kinokavaId);

---Tabeli loomine kinokava.
CREATE TABLE kinokava(
	kinokavaId int Primary Key identity(1,1),
	kuupaev DATETIME,
	filmNimetus int,
	piletihind int)
INSERT INTO kinokava (kuupaev, filmNimetus, piletihind)
VALUES ('12.04.24',  4, 12.99)
SELECT * FROM kinokava

ALTER TABLE kinokava ADD FOREIGN KEY (filmNimetus) REFERENCES film(filmId);

---Tabeli loomine film.
DROP TABLE film
CREATE TABLE film(
	filmId int Primary Key identity(1,1),
	filmNimetus varchar(25),
	zanrId int,
	pikkus int,
	rezisorId int,
	filmTypeId int,
	TootjaId int,
	)
INSERT INTO film (filmNimetus, pikkus, zanrId, rezisorId, filmTypeId, TootjaId)
VALUES ('Sherlok Holms', 1.49, 1, 1, 5, 100)
SELECT * FROM film

ALTER TABLE film ADD FOREIGN KEY (zanrId) REFERENCES zanr(zanrId);




---Lisa tabel Tootja (tootjaId, Nimi, Address) 

CREATE TABLE Tootja(
	TootjaId int Primary Key identity(1,1),
	Nimi varchar(25),
	Addres varchar(25))
INSERT INTO Tootja (Nimi, Addres)
VALUES ('Irirna', 'Sõpruse pst46')
SELECT * FROM Tootja 

ALTER TABLE film ADD FOREIGN KEY (tootjaId) REFERENCES tootja(TootjaId)

Select * from film

Select *from Tootja
